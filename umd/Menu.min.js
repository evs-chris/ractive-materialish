!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("ractive")):"function"==typeof define&&define.amd?define(["ractive"],e):t.RMMenu=e(t.Ractive)}(this,function(t){"use strict";function e(t,e,n){if(i&&i.Ractive&&"object"==typeof i.Ractive[e]){var r=document.currentScript;if(r||(r=(r=document.querySelectorAll("script"))[r.length-1]),r){var o=r.getAttribute("data-alias");o&&(o=(o=o.split("&")).reduce(function(t,e){var n=e.split("="),i=n[0],r=n[1];return t[i]=r,t},{})),Ractive[e][o&&o[t]||t]=n}}}function n(t,e){var n=t.processParams(e,{duration:200,easing:"easeInOut"});t.setStyle("overflow","hidden");var i="x"===n.axis?"width":"height";if(t.isIntro){var r=t.getStyle(i);return t.setStyle(i,0),t.setStyle("opacity",0),t.animateStyle(i,r,n).then(function(){return t.animateStyle("opacity",1,n)})}return t.setStyle(i,t.getStyle(i)),t.setStyle("opacity",1),t.animateStyle("opacity",0,n).then(function(){return t.animateStyle(i,0,n)})}t=t&&t.hasOwnProperty("default")?t.default:t;var i="undefined"!=typeof window?window:null;e("expand","transitions",n);var r=function(t){function e(e){t.call(this,opts)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addItem=function(t,e){return"number"==typeof e?this.splice("items",e,0,t):this.push("items",t),new o(this,null,t)},e.prototype.visibleItems=function(t){var e=this;return t.filter(function(t){return!1!==t.condition&&("string"!=typeof t.condition||!1!==e.get(t.condition))}).length},e.prototype.getHandle=function(t){var e,n=this;if("string"==typeof t)if(this.refs[t])e=this.refs[t].ctx;else{var i=this.find(t);i&&(e=this.getContext(i))}else t&&t.parentNode&&(e=this.getContext(t));if(e){for(var r=[e.get()],s="../../";""!==e.resolve(s);)r.unshift(e.get(s)),s+="../../";return r.reduce(function(t,e){return new o(n,t,e)},null)}},e}(t);t.extendWith(r,{template:{v:4,t:[{t:7,e:"div",m:[{n:"class-rmenu",t:13}],f:[{t:8,r:"items"}]}],p:{container:[{t:4,f:[{t:3,r:".content"}],n:50,r:".content"},{t:4,n:50,f:[{t:16,r:".contentPartial"}],r:".contentPartial",l:1}],section:[{t:7,e:"div",m:[{n:"class-rmenu-main",t:13}],f:[{t:7,e:"div",m:[{n:"class-rmenu-title",t:13}],f:[{t:4,f:[{t:2,r:".title"}],n:50,r:".title"},{t:4,n:50,f:[{t:16,r:".titlePartial"}],r:".titlePartial",l:1}]}]}," ",{t:8,r:"children"}],children:[{t:4,f:[{t:7,e:"div",m:[{n:"class-rmenu-items",t:13},{n:"expand",t:72,v:"t0"}],f:[{t:8,r:"items"}]}],n:50,x:{r:[".items.length",".open",".type"],s:'_0&&(_1||_2==="section")'}}],item:[{t:7,e:"div",m:[{n:"class-rmenu-main",t:13},{t:4,f:[{n:"class-rmenu-active",t:13,f:[{t:2,rx:{r:"~/",m:[{t:30,n:".activeRef"}]}}]}],n:50,r:".activeRef"},{t:4,n:50,f:[{n:"class-rmenu-active",t:13,f:[{t:2,x:{r:["."],s:"_0.active()"}}]}],x:{r:[".active"],s:'typeof _0==="function"'},l:1},{t:4,n:50,f:[{n:"class-rmenu-active",t:13,f:[{t:2,r:".active"}]}],x:{r:[".active"],s:'typeof _0==="boolean"'},l:1}],f:[{t:4,f:[{t:7,e:"div",m:[{n:"class-menu-left",t:13}],f:[{t:3,r:".left"}]}],n:50,r:".left"},{t:4,n:50,f:[{t:7,e:"div",m:[{n:"class-rmenu-left",t:13}],f:[{t:16,r:".leftPartial"}]}],r:".leftPartial",l:1}," ",{t:4,f:[{t:7,e:"div",m:[{n:"class-rmenu-expand",t:13},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).toggle(".open"),false]'}},{n:"expand",t:72,f:{r:[],s:'[{axis:"x"}]'},v:"t0"}]}],n:50,x:{r:[".items.length","@this",".items"],s:"_2&&_0&&_1.visibleItems(_2)"}}," ",{t:4,f:[{t:7,e:"div",m:[{n:"class-menu-right",t:13}],f:[{t:3,r:".right"}]}],n:50,r:".right"},{t:4,n:50,f:[{t:7,e:"div",m:[{n:"class-rmenu-right",t:13}],f:[{t:16,r:".rightPartial"}]}],r:".rightPartial",l:1}," ",{t:7,e:"div",m:[{n:"class-rmenu-title",t:13},{t:4,f:[{t:16,r:".actionPartial"}],n:50,r:".actionPartial"},{t:4,f:[{n:["click"],t:70,f:{r:["."],s:"[_0.action()]"}}],n:50,x:{r:[".action"],s:'typeof _0==="function"'}},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).toggle(".open"),false]'}}],n:50,x:{r:[".actionPartial",".action",".items.length"],s:'!_0&&typeof _1!=="function"&&_2'}}],f:[{t:4,f:[{t:3,r:".title"}],n:50,r:".title"},{t:4,n:50,f:[{t:16,r:".titlePartial"}],r:".titlePartial",l:1}]}]}," ",{t:8,r:"children"}],items:[{t:4,f:[{t:4,f:[{t:7,e:"div",m:[{n:"class-rmenu-entry",t:13},{t:4,f:[{n:"class-rmenu-item",t:13}],n:50,x:{r:[".type"],s:'!_0||_0==="item"'}},{t:4,n:50,f:[{n:"class-rmenu-section",t:13}],x:{r:[".type"],s:'_0==="section"'},l:1},{t:4,n:50,f:[{n:"class-rmenu-container",t:13}],x:{r:[".type"],s:'_0==="container"'},l:1},{n:"class-rmenu-expanded",t:13,f:[{t:2,r:".open"}]},{n:"expand",t:72,v:"t0"},{t:4,f:[{t:8,r:".refPartial"}],n:50,r:".refPartial"},{t:4,n:50,f:[{n:"ref",t:71,f:{r:[".ref"],s:"[_0]"}}],x:{r:[".ref"],s:'typeof _0==="string"'},l:1},{t:4,f:[{t:16,r:".attrsPartial"}],n:50,r:".attrsPartial"}],f:[{t:8,x:{r:[".type"],s:'_0||"item"'}}]}],n:50,x:{r:["~/",".condition","."],s:'_1===undefined||(typeof _1==="boolean"&&_1)||(typeof _1==="string"&&_0[_1])||(typeof _1==="function"&&_2.condition())'}}],n:52,r:".items"}]},e:{'_0&&(_1||_2==="section")':function(t,e,n){return t&&(e||"section"===n)},"_0.active()":function(t){return t.active()},'typeof _0==="function"':function(t){return"function"==typeof t},'typeof _0==="boolean"':function(t){return"boolean"==typeof t},'[(_0).toggle(".open"),false]':function(t){return[t.toggle(".open"),!1]},'[{axis:"x"}]':function(){return[{axis:"x"}]},"_2&&_0&&_1.visibleItems(_2)":function(t,e,n){return n&&t&&e.visibleItems(n)},"[_0.action()]":function(t){return[t.action()]},'!_0&&typeof _1!=="function"&&_2':function(t,e,n){return!t&&"function"!=typeof e&&n},'!_0||_0==="item"':function(t){return!t||"item"===t},'_0==="section"':function(t){return"section"===t},'_0==="container"':function(t){return"container"===t},"[_0]":function(t){return[t]},'typeof _0==="string"':function(t){return"string"==typeof t},'_0||"item"':function(t){return t||"item"},'_1===undefined||(typeof _1==="boolean"&&_1)||(typeof _1==="string"&&_0[_1])||(typeof _1==="function"&&_2.condition())':function(t,e,n){return void 0===e||"boolean"==typeof e&&e||"string"==typeof e&&t[e]||"function"==typeof e&&n.condition()}}},css:function(t){return[function(t){return"\n   .rmenu {\n     font-family: "+(t("menu.font")||"sans-serif")+";\n     color: "+(t("menu.fg")||"#fefefe")+";\n     background-color: "+(t("menu.bg")||"#444")+";\n     min-height: 100%;\n   }\n   .rmenu-item {\n     border-top: 1px solid transparent;\n     border-bottom: 1px solid transparent;\n     transition: border 0.2s ease-in-out;\n   }\n   .rmenu-expanded {\n     border-top: 1.5px solid "+(t("menu.fgdim")||t("fgdim")||"rgba(255, 255, 255, 0.3)")+";\n     border-bottom: 1.5px solid "+(t("menu.fgdim")||t("fgdim")||"rgba(255, 255, 255, 0.3)")+";\n   }\n   .rmenu-main {\n     width: 100%;\n     box-sizing: border-box;\n     user-select: none;\n     transition: 0.3s ease-in-out;\n     transition-property: color, background-color;\n   }\n   .rmenu-main.rmenu-active {\n     color: "+(t("menu.fgActive")||t("fga1")||"#07e")+";\n     background-color: "+(t("menu.bgActive")||t("bg1")||"#dfdfdf")+";\n   }\n   .rmenu-left {\n     float: left;\n     margin: 0 0 0 0.5em;\n   }\n   .rmenu-right {\n     float: right;\n     margin: 0 0.5em 0 0;\n   }\n   .rmenu-items {\n     display: block;\n   }\n   .rmenu-expand {\n     width: 1.5em;\n     height: 2em;\n     float: right;\n     padding-left: 0.5em;\n   }\n   .rmenu-expand:before {\n     position: relative;\n     display: inline-block;\n     font-size: 0.5em;\n     top: 1em;\n     padding: 0 0.5em 0.5em 0;\n     content: 'â—¢';\n     transform: rotate(45deg);\n     transition: transform 0.2s ease-in-out;\n     box-sizing: border-box;\n   }\n \n   .rmenu-title {\n     white-space: nowrap;\n     overflow: hidden;\n     text-overflow: ellipsis;\n     cursor: pointer;\n     padding: 0.4em 0.5em;\n   }\n \n   .rmenu-section {\n     padding: 0.75em 0;\n   }\n   .rmenu-section > .rmenu-main {\n     cursor: default;\n     font-size: 0.75em;\n     opacity: 0.7;\n     margin-bottom: 0.25em;\n   }\n \n   .rmenu-container {\n     padding: 0.3em;\n     box-sizing: border-box;\n     margin-bottom: 0.5em;\n   }\n \n   .rmenu-expanded > .rmenu-main > .rmenu-expand:before {\n     transform: rotate(-135deg);\n   }\n   "}.call(this,t)].join(" ")},cssId:"menu",noCssTransform:!0,noIntro:!0,nestedTransitions:!1,on:{construct:function(){function t(e){if("item"===e.e||"section"===e.e||"container"===e.e){var n={},r=[];return"item"!==e.e&&(n.type=e.e),e.m&&e.m.forEach(function(t){if("title"===t.n)"string"==typeof t.f?n.title=t.f:n.titlePartial={t:t.f};else if(70===t.t&&"action"===t.n[0])n.actionPartial={t:[{n:["click"],f:t.f,t:t.t}]};else if("guard"===t.n&&t.f&&1===t.f.length&&2===t.f[0].t){var e="_cnd"+i.length;n.condition=e,i.push({t:13,n:e,f:t.f})}else if("ref"===t.n){if("string"==typeof t.f)n.ref=t.f;else if(t.f&&1===t.f.length&&2===t.f[0].t){var o="_cnd"+i.length;i.push({t:13,n:o,f:t.f}),n.refPartials={t:[{t:71,n:"ref",f:{r:o,s:"[_0]"}}]}}}else if("active"===t.n){if(t.f&&1===t.f.length&&2===t.f[0].t){var s="_cnd"+i.length;n.activeRef=s,i.push({t:13,n:s,f:t.f})}}else r.push(t)}),r.length&&(n.attrsPartial={t:r}),"container"===e.e?(n.contentPartial={t:e.f},n):(e.f&&e.f.forEach(function(e){if("title"===e.e)1===e.f.length&&"string"==typeof e.f[0]?n.title=e.f[0]:n.titlePartial={t:e.f};else if("item"===e.e||"section"===e.e||"container"===e.e){var i=t(e);i&&(n.items||(n.items=[])).push(i)}else"left"===e.e?n.leftPartial={t:e.f}:"right"===e.e&&(n.rightPartial={t:e.f})}),n)}}var e=this.component;if(e){var n=e.template.f||[],i=e.template.m?e.template.m.slice():[],r=e.template;e.template={e:r.e,f:r.f,t:r.t,m:i};var o=[];n.forEach(function(e){var n=t(e);n&&o.push(n)}),this._items=o}},config:function(){this._items&&this.set("items",(this.get("items")||[]).concat(this._items),{shuffle:!0})}},transitions:{expand:n},decorators:{ref:function(t,e){var n=this,i=e;n.refs||(n.refs={});var r={update:function(t){n.refs[i]===r&&delete n.refs[i],i=t,n.refs[i]=r},teardown:function(){n.refs[i]===r&&delete n.refs[i]}};return r.ctx=n.getContext(t),n.refs[i]=r,r}}});var o=function(t,e,n){this.menu=t,this.parent=e,this.item=n},s={keypath:{configurable:!0},active:{configurable:!0}};return s.keypath.get=function(){if(!this.removed){if(!this.parent)return"items."+this.menu.get("items").indexOf(this.item);var t=this.parent.keypath+".items";return t+"."+this.menu.get(t).indexOf(this.item)}},s.active.get=function(){if(!this.removed){var t=this.item;return t.activeRef?this.menu.get(t.activeRef):"function"==typeof t.active?t.active():t.active}},s.active.set=function(t){if(!this.removed){var e=this.item;return e.activeRef?this.menu.set(e.activeRef,t):this.set(".active",t)}},o.prototype.addItem=function(t,e){if(this.removed)return!1;var n=this.keypath+".items";return"number"==typeof e?this.menu.splice(n,0,e,t):this.menu.push(n,t),new o(this.menu,this,t)},o.prototype.open=function(){if(this.removed)return!1;this.menu.set(this.keypath+".open",!0)},o.prototype.close=function(){if(this.removed)return!1;this.menu.set(this.keypath+".open",!1)},o.prototype.remove=function(){if(this.removed)return!1;var t=(this.parent?this.parent.keypath+".":"")+"items",e=this.menu.get(t);return this.menu.splice(t,e.indexOf(this.item),1),this.removed=!0,!0},o.prototype.get=function(t){if(this.removed)return!1;var e=t.replace(/^[\.\/]*/,"");return this.menu.get(this.keypath+"."+e)},o.prototype.set=function(t,e){if(this.removed)return!1;var n=t.replace(/^[\.\/]*/,"");return this.menu.set(this.keypath+"."+n,e)},Object.defineProperties(o.prototype,s),e("RMMenu","components",r),r});
